<!DOCTYPE html>
<!-- saved from url=(0312)https://account.xiaomi.com/pass/serviceLogin?sid=miotstore&_bannerBiz=miotstore&callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1 -->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="description" content="小米帐号能使用小米手机，MIUI，小米云，多看阅读，米聊，小米社区等小米服务。" />
  <meta name="keywords" content="小米帐号，小米账号，小米注册，注册，Mi Account，Sign in，小米，帐号，账号，小米帐户，登录，登陆，安全令牌，动态口令，小米注册，找回密码" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0,user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  <title>小米帐号 - 登录</title>
  <link type="text/css" rel="stylesheet" href="./小米帐号 - 登录_files/login.css" />
  <style type="text/css">.miverify_wind,.miverify_modal_panel{-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"PingFangSC-Regular", "Open Sans", Arial, "Hiragino Sans GB", "Microsoft YaHei", "STHeiti", "WenQuanYi Micro Hei", SimSun, sans-serif;font-size:16px;display:none;opacity:0;position:fixed;z-index:1147483647;left:0;top:0;height:100%;width:100%;-webkit-transition:opacity .5s;transition:opacity .5s}.miverify_wind *,.miverify_modal_panel *{font-family:"PingFangSC-Regular", "Open Sans", Arial, "Hiragino Sans GB", "Microsoft YaHei", "STHeiti", "WenQuanYi Micro Hei", SimSun, sans-serif}.miverify_wind a,.miverify_modal_panel a{color:#999;text-decoration:none}.miverify_wind a:hover,.miverify_wind a:focus,.miverify_wind a:visited,.miverify_modal_panel a:hover,.miverify_modal_panel a:focus,.miverify_modal_panel a:visited{color:#333;text-decoration:none}.miverify_wind a:focus,.miverify_modal_panel a:focus{outline:0 none}.miverify_wind input::-moz-placeholder,.miverify_wind ::-webkit-input-placeholder,.miverify_wind input:-ms-input-placeholder,.miverify_modal_panel input::-moz-placeholder,.miverify_modal_panel ::-webkit-input-placeholder,.miverify_modal_panel input:-ms-input-placeholder{color:#999;font-weight:normal}.miverify_modal_panel{opacity:1}.miverify_panel_ghost{position:absolute;left:0;top:0;width:100%;height:100%;opacity:.6;filter:alpha(opacity=60);background-color:#000}.miverify_panel_box{text-align:center;position:absolute;top:50%;left:50%;-webkit-box-shadow:0 1px 8px rgba(128,128,128,0.3);box-shadow:0 1px 8px rgba(128,128,128,0.3);border:1px solid #d1d1d1;border-radius:2px;overflow:hidden;background-color:#fff;-webkit-transition:width .5s ease,height .5s ease;transition:width .5s ease,height .5s ease;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);width:300px}.miverify_panel_box.miverify_panel_show_captcha .miverify_captcha_content{margin:20px auto;display:-webkit-box;display:-ms-flexbox;display:flex}.miverify_panel_box.miverify_panel_show_captcha .miverify_panel_success,.miverify_panel_box.miverify_panel_show_captcha .miverify_panel_loading,.miverify_panel_box.miverify_panel_show_captcha .miverify_panel_error{display:none}.miverify_panel_box.miverify_panel_show_captcha .miverify_panel_next{display:block}.miverify_panel_box.loading .miverify_panel_success,.miverify_panel_box.loading .miverify_panel_next,.miverify_panel_box.loading .miverify_panel_error{display:none}.miverify_panel_box.loading .miverify_panel_loading{display:inline-block}.miverify_panel_box.success .miverify_panel_loading,.miverify_panel_box.success .miverify_panel_next,.miverify_panel_box.success .miverify_panel_error{display:none}.miverify_panel_box.success .miverify_panel_success{display:block}.miverify_panel_box.error .miverify_panel_success,.miverify_panel_box.error .miverify_panel_next,.miverify_panel_box.error .miverify_panel_loading{display:none}.miverify_panel_box.error .miverify_panel_error{display:block}.miverify_panel_error{display:none;width:100%;padding:20px 0 0 0;height:150px;position:relative}.miverify_panel_error .miverify_error_footer_panel{display:none}.miverify_panel_error .miverify_error_refresh_type{display:-webkit-box;display:-ms-flexbox;display:flex}.miverify_panel_error .miverify_error_refresh_type .miverify_cancel_btn{display:block}.miverify_panel_error .miverify_panel_error_title{margin:10px 0 0 0;color:#000}.miverify_panel_error .miverify_panel_error_content{margin:30px 0;cursor:pointer;color:#666}.miverify_panel_loading_title,.miverify_panel_loading_content,.miverify_panel_success_title,.miverify_panel_error_title,.miverify_panel_error_content{text-align:center;font-size:14px;height:14px;line-height:14px}.miverify_ok_btn,.miverify_cancel_btn{background-color:#fff;color:#33ADFF;-webkit-appearance:none;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;outline:0 none;-webkit-transition:.1s;transition:.1s;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:17px 20px;font-size:16px;line-height:1;white-space:nowrap;cursor:pointer;border:1px solid #dcdfe6;border-bottom:0 none;border-right:0 none;border-left:0 none;-webkit-box-flex:1;-ms-flex:1;flex:1}.miverify_cancel_btn{color:#999;border-right:1px solid #dcdfe6;-webkit-box-flex:1;-ms-flex:1;flex:1;display:none}.miverify_panel_show_captcha{text-align:center}.miverify_panel_show_captcha .miverify_window{height:260px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.miverify_panel_show_captcha .miverify_captcha_title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-align:center;font-size:16px;margin:0;padding:10px 0}.miverify_panel_show_captcha .miverify_content{padding:0 20px;-webkit-box-flex:1;-ms-flex:1;flex:1}.miverify_panel_show_captcha .miverify_footer_panel{display:-webkit-box;display:-ms-flexbox;display:flex}.miverify_panel_show_captcha .miverify_refresh_link{margin:10px 0;font-size:14px;color:#0099FF;-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:10px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-align:right}.miverify_panel_show_captcha .miverify_refresh_link:hover,.miverify_panel_show_captcha .miverify_refresh_link:visited,.miverify_panel_show_captcha .miverify_refresh_link:active,.miverify_panel_show_captcha .miverify_refresh_link:focus{color:#0099FF}.miverify_panel_show_captcha .miverify_err_tip{font-size:14px;color:#f66;margin:10px 0;text-align:left;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.miverify_panel_show_captcha .miverify_captcha_input{-webkit-appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #dcdfe6;-webkit-box-sizing:border-box;box-sizing:border-box;color:#606266;display:block;outline:none;padding:10px 0 10px 15px;width:100%;font-size:14px}.miverify_panel_show_captcha img{display:block;float:left;cursor:pointer}.miverify_flat.miverify_wind .miverify_panel_box{-webkit-box-shadow:none !important;box-shadow:none !important;border:0 none !important;width:100% !important;min-width:270px}.miverify_flat.miverify_wind .miverify_panel_ghost{background-color:#fff !important}.miverify_panel_loading{display:none;margin:20px auto;vertical-align:middle}.miverify_panel_loading .miverify_panel_loading_content{color:#000;margin-left:10px}.miverify_panel_loading .miverify_panel_loading_icon{float:left;width:20px;height:20px;-webkit-animation:rotate-loading 1.2s linear infinite;animation:rotate-loading 1.2s linear infinite;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDMzIxQzg5RDJDQjUxMUU4OThGNkYxQkI2ODBGQTlERCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDMzIxQzg5RTJDQjUxMUU4OThGNkYxQkI2ODBGQTlERCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMzMjFDODlCMkNCNTExRTg5OEY2RjFCQjY4MEZBOUREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMzMjFDODlDMkNCNTExRTg5OEY2RjFCQjY4MEZBOUREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+uWjUJwAAAZVJREFUeNqk1MsrRGEYx/Ezx2UyDLZiSrmEhVuUW1aywIYs2Cj/jJ2NpYWysLBgZSuK7ORWRJNbNiLMjMtIjO9TPzUxcpx56tOcOXPOb95z3ud9A07mKkArGlGOMFKI4QqrOM10Y26Gcx0YRqVCHpBAAGVo1vHsX4F20RiG8IEtOcOTrilGBc71vURPcJgpfByLmEGb461sAEsY+DqRo892TOAG0zjyGJhEi17DMW5dTcCo3tc8LhzvFcUCghiB6+ofbAK25b+1gQM0oM4Cm/TDpuOvUpq8fMtyNUuxtJnzU1F1QsRV0ybSWsNP2f3PluVqyAEn+7KMlAXGNcpwFmHW4IWWZYGXOlGdRWAtQtZyFriDd/T4DLPF0Y0X7FrgPk7U7b0+AvtQr5xojjaCO+0y9dqWbjyG2aKYxKt2n/uvtXyNN3SpL9c1+79VHvoVFtSS3fm+fa1osSc1amuDKh0/6JpS1KBTT2P9N4e19N75rSKY0vGjrg1pM0lq/S5rlTheAu3GQY2ySK8grjbb03b1oz4FGABfpltgDckVGAAAAABJRU5ErkJggg==)}@-webkit-keyframes rotate-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}
  </style>
  <!--<script src="./小米帐号 - 登录_files/config"></script>-->
  <!--<script src="./小米帐号 - 登录_files/m.js.下载"></script>-->

</head>
<body class="zh_CN">
<div id="app">
<div class="wrapper">
  <!-- loading -->
  <div class="popup_mask acquirePhoneMask" style="display:none;" id="loadingMask">
    <div class="bkc"></div>
    <div class="mod_wrap loadingmask">
    </div>
    <div class="loadingTips">
      正在检测你的帐号信息...
    </div>
  </div>
  <div class="wrap">
    <div class="layout_panel">
      <div class="layout" id="layout">
        <div id="main-content">
          <!--表单输入登录-->
          <div class="mainbox form-panel" id="login-main">
            <div id="custom_display_2">
              <a class="ercode" id="qrcode-trigger" href="javascript:void(0)"></a>
            </div>
            <!-- header s -->
            <div class="lgnheader">
              <div class="header_tit t_c">
                <em id="custom_display_1" class="milogo">
                  <svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect width="48" height="48" rx="3" ry="3" style="fill:#ff6700"></rect>
                    <rect x="10" y="15" width="4.2" height="18" style="fill:#FFFFFF"></rect>
                    <rect x="33.75" y="15" width="4.2" height="18" style="fill:#FFFFFF"></rect>
                    <rect x="11.25" y="15" width="15" height="4.1" style="fill:#FFFFFF"></rect>
                    <rect x="26.2" y="20.55" width="4.2" height="12.5" style="fill:#FFFFFF"></rect>
                    <rect x="20.6" y="15" width="9.8" height="9.8" rx="4.4" ry="4.4" style="fill:#FFFFFF"></rect>
                    <rect x="20.2" y="19" width="6" height="6" rx="2" ry="2" style="fill:#ff6700"></rect>
                    <rect x="18" y="19.1" width="4" height="2.2" style="fill:#ff6700"></rect>
                    <rect x="24.2" y="23" width="1.94" height="10" style="fill:#ff6700"></rect>
                    <rect x="18.1" y="22.8" width="4.2" height="10.2" style="fill:#FFFFFF"></rect>
                  </svg> </em>
                <h4 class="header_tit_txt" id="login-title">小米帐号登录</h4>
                <div class="site_info"></div>
              </div>
            </div>
            <!-- header e -->
            <!-- tab s -->
            <div class="nav_tabs_panel">
              <div id="nav-tabs" class="nav_tabs">
                <a class="navtab-link now" href="javascript:void(0);" data-tab="pwd">帐号登录</a>
                <span class="line"></span>
                <a class="navtab-link" href="javascript:void(0);" data-tab="qr">扫码登录</a>
              </div>
            </div>
            <!-- tab e -->
            <!-- tab con s -->
            <div class="tabs-con tabs_con now" data-con="pwd">
              <div>
                <div class="login_area" id="login-main-form">
                  <div class="loginbox c_b">
                    <!-- 输入框 -->
                    <div class="lgn_inputbg c_b login-panel pwdLogin">
                      <!--验证用户名-->
                      <div class="single_imgarea" id="account-info">
                        <div class="na-img-area" id="account-avator" style="display:none">
                          <div class="na-img-bg-area" id="account-avator-con"></div>
                        </div>
                        <p class="us_name tac" id="account-displayname"></p>
                        <p class="us_id tac"></p>
                      </div>
                      <label id="region-code" class="labelbox login_user c_b" for="">
                        <div class="turn_area">
                          <a class="btn_turn" id="manual_code" href="javascript:void(0);" title="关闭国家码"></a>
                        </div>
                        <div class="country_list">
                          <div class="animation countrycode_selector" id="countrycode_selector">
                            <span class="country_code"><tt class="countrycode-value" id="countrycode_value"></tt><i class="icon_arrow_down"></i></span>
                          </div>
                        </div> <input v-model="inputUser.username" class="item_account" autocomplete="off" type="text" name="user" id="username" placeholder="邮箱/手机号码/小米ID" /> <input type="hidden" name="log" id="debug_log" /> </label>
                      <div class="country-container" id="countrycode_container" style="display: none;">
                        <div class="country_container_con" id="countrycode_container_con"></div>
                      </div>
                      <label class="labelbox pwd_panel c_b"> <input v-model="inputUser.password" class="item_account" type="password" placeholder="密码" autocomplete="off" id="pwd" name="password" /> <input class="item_account" type="text" placeholder="密码" autocomplete="off" id="visiablePwd" name="visiablepwd" style="display:none" />
                        <div class="eye_panel pwd-visiable">
                          <i class="eye pwd-eye">
                            <svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
                              <path class="eye_outer" d="M0 8 C6 0,14 0,20 8, 14 16,6 16, 0 8 z"></path>
                              <circle class="eye_inner" cx="10" cy="8" r="3"></circle>
                            </svg> </i>
                        </div>
                        <div id="sms-code-panel" class="code_panel">
                          <a class="send_ticket" href="javascript:;" id="getSMSCode">获取验证码</a>
                        </div> </label>
                    </div>
                    <div class="security_Controller" style="display: none;">
                      <label class="checkbox_area"> <input type="checkbox" id="trustSecurityController" class="checkbox" />使用安全控件</label>
                    </div>
                    <div id="captcha"></div>
                    <!-- 错误信息 -->
                    <div class="err_tip">
                      <div>
                        <em class="icon_error"></em>
                        <span class="error-con"></span>
                      </div>
                    </div>




                    <div  class="btns_bg">
                      <input @click="doLogin"  class="btnadpt" id="login-button" type="button" value="登录" />





                      <span id="custom_display_8" class="sns-default-container sns_default_container" style="display: none;"> </span>
                    </div>
                    <div class="other_panel clearfix">
                      <!--<span id="custom_display_256" class="sms_link"> <a href="javascript:;" class="btnadpt btn_gray login_type_link" id="ChangeLoginType">手机短信登录/注册</a> </span>-->
                      <div class="reverse" id="extra-links">
                        <div class="n_links_area reg_forget_links reg-forget-links" id="custom_display_64">
                          <a  class="outer-link" href="http://localhost:8080/pages/%E5%B0%8F%E7%B1%B3%E8%B4%A6%E5%8F%B7-%E6%B3%A8%E5%86%8C.html">立即注册</a>
                          <span>|</span>
                          <a class="outer-link" href="https://account.xiaomi.com/pass/forgetPassword?sid=miotstore&amp;_bannerBiz=miotstore&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1">忘记密码？</a>
                        </div>
                        <div class="n_links_area sms_unavaliable_links sms-unavaliable-links">
                          <a target="_blank" href="https://static.account.xiaomi.com/html/faq/faqSMSerror.html">收不到验证码？</a>
                        </div>
                      </div>
                      <!-- 其他登录方式 s -->
                      <div style="display: block;" class="other_login_type sns-login-container" id="custom_display_16">
                        <fieldset class="oth_type_tit">
                          <legend align="center" class="oth_type_txt">其他方式登录</legend>
                        </fieldset>
                        <div id="sns-login-links" class="oth_type_links">
                          <a class="icon_type btn_qq sns-login-link" data-type="qq" href="https://account.xiaomi.com/pass/sns/login/auth?appid=100284651&amp;&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1&amp;sid=miotstore" title="QQ登录" target="_blank"><i class="btn_sns_icontype icon_default_qq"></i></a>
                          <a class="icon_type btn_weibo sns-login-link" data-type="weibo" href="https://account.xiaomi.com/pass/sns/login/auth?appid=2996826273&amp;&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1&amp;sid=miotstore" title="微博登录" target="_blank"><i class="btn_sns_icontype icon_default_weibo"></i></a>
                          <a class="icon_type btn_alipay sns-login-link" data-type="alipay" href="https://account.xiaomi.com/pass/sns/login/auth?appid=2088011127562160&amp;&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1&amp;sid=miotstore" title="支付宝登录" target="_blank"><i class="btn_sns_icontype icon_default_alipay"></i></a>
                          <a class="icon_type btn_weixin sns-login-link" data-type="weixin" href="https://account.xiaomi.com/pass/sns/login/auth?appid=wxxmzh&amp;scope=snsapi_login&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1&amp;sid=miotstore" title="微信登录" target="_blank"><i class="btn_sns_icontype icon_default_weixin"></i></a>
                        </div>
                      </div>
                      <!-- 其他登录方式 e -->
                      <p class="acq_tips" style="display: none;"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tabs-con tabs_con" data-con="qr">
            </div>
            <!-- tab con e -->
          </div>
          <div class="ercode_area" id="login-qrcode">
            <div class="ercode_pannel">
              <a class="code_close" href="javascript:void(0)" title="关闭" id="qrcode-close"><span class="icon_code_close"></span></a>
              <div class="ercode_box">
                <div class="code_hd">
                  <h3 class="code_tit">小米帐号扫码登录</h3>
                  <p>请打开「设置 &gt; 小米帐号 &gt; 右上角扫一扫」扫码登录</p>
                </div>
                <div class="code_iframe">
                  <iframe style="background:#fff;" src="./小米帐号 - 登录_files/saved_resource(1).html" id="qriframe" frameborder="0" scrolling="no" sandbox="allow-scripts allow-same-origin allow-top-navigation allow-modals"></iframe>
                </div>
                <div class="custom_sub_txt">
                  <p id="custom-qr-name"></p>
                  <p>小米手机可打开「设置」&gt;「小米帐号」扫码登录</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="custom_display_4" class="n-footer">
  <div class="nf-link-area clearfix">
    <ul class="lang-select-list">
      <li><a href="javascript:void(0)" data-lang="zh_CN" class="lang-select-li current">简体</a>|</li>
      <li><a href="https://account.xiaomi.com/pass/serviceLogin?sid=miotstore&amp;_bannerBiz=miotstore&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1&amp;_locale=zh_TW" data-lang="zh_TW" class="lang-select-li">繁体</a>|</li>
      <li><a href="https://account.xiaomi.com/pass/serviceLogin?sid=miotstore&amp;_bannerBiz=miotstore&amp;callback=https%3A%2F%2Fshopapi.io.mi.com%2Fapp%2Fshop%2Fauth%3Flogid%3D1594626721.7479161%26sign%3Df8291a1461404a0b82a4ef9ec43f69ba%26followup%3Dhttps%253A%252F%252Fwww.xiaomiyoupin.com%252F%253Fsource%253Dbdss_pc23%2526noBack%253D1&amp;_locale=en" data-lang="en" class="lang-select-li">English</a>|</li>
      <li><a href="https://static.account.xiaomi.com/html/faq/faqList.html" target="_blank">常见问题</a>|</li>
      <li><a id="msg-privacy" href="https://account.xiaomi.com/about/protocol/privacy" target="_blank">隐私政策</a></li>
    </ul>
  </div>
  <p class="nf-intro">小米公司版权所有-京ICP备10046444-<a class="beian-record-link" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020134"><span><img src="./小米帐号 - 登录_files/ghs.png" /></span>京公网安备11010802020134号</a>-京ICP证110507号</p>
</div>
<div class="modal_container" style="display: none;">
  <div class="modal_msk"></div>
  <div class="modal_tip mod_acc_tip security-controller-modal" id="modal-id-0" style="display: none;">
    <div class="modal_tip_flex">
      <div class="modal_tip_hd modal-header">
        <div class="external_logo_area">
          <a class="milogo" href="javascript:void(0)"></a>
        </div>
        <div class="modal-header-text modal_tip_title">
          提示
        </div>
        <a href="javascript:void(0)" title="" class="modal-header-close btn_mod_close"><span>关闭</span></a>
      </div>
      <div class="modal_tip_bd modal-body">
        <div id="sect-controller-panel" class="security_controller_panel">
          <h4>您需要安装安全控件，才可使用安全登录。</h4>
          <p>控件可对您的密码进行加密保护，提升账户安全性。</p>
          <p>请点击“立即安装控件”按钮，并根据提示进行安装。</p>
          <div class="tip_msg">
            完成安装后，请重新启动浏览器
          </div>
        </div>
        <div class="tip_btns">
          <a title="立即安装控件" href="https://account.xiaomi.com/static/res/0369340/account-static/static/mipay/XiaomiCtrl.exe" class="btn_tip btn_commom btn-action-controller">立即安装控件</a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- <script src="https://account.xiaomi.com/static/res/public/account-static/scripts/bundle.min.js" crossorigin="anonymous"></script>
<script>
Sentry.init({
  dsn: 'https://328aafa16cc24ce6a8cdb3f5c00419e4@sentry.micloud.d.xiaomi.net/26'
});
</script> -->
<div class="miverify_wind" style="display: none;">
  <div class="miverify_panel_ghost"></div>
  <div class="miverify_panel_box loading">
    <div class="miverify_panel_loading">
      <div class="miverify_panel_loading_icon"></div>
      <span class="miverify_panel_loading_content">环境安全检测中...</span>
    </div>
    <div class="miverify_panel_error">
      <p class="miverify_panel_error_title">提示</p>
      <div class="miverify_panel_error_content"></div>
      <div class="miverify_error_footer_panel" style="display:none;">
        <button class="miverify_cancel_btn">取消</button>
        <button class="miverify_ok_btn miverify_refresh_btn">重试</button>
      </div>
    </div>
    <div class="miverify_panel_next">
      <div class="miverify_wrap">
        <div class="miverify_widget">
          <div class="miverify_window">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
</body>


<script type="text/javascript" src="/js/vue.js" ></script>
<script type="text/javascript" src="/js/axios.min.js" ></script>
<script type="text/javascript" src="/layui/layui.js" ></script>
<script type="text/javascript" src="/js/jquery-3.4.1.min.js" ></script>
<script type="text/javascript">
    var vm = new Vue({
        el:"#app",
        data:{
            book:{},//当前图书的详情
            loginAndRegist:"login",//控制登录注册表单切换的变量,默认是登录页面
            num:1,//默认数量
            inputUser:{
                username:"",//手机号
                password:""//密码
            },
            loginUser:null //存储登录成功之后的用户信息
        },
        mounted:function () {
            //1. 获取传递的图书id
            var bid = window.localStorage.getItem("bid");
            // 获取用户存放到sessionStorage中的用户信息
            var loginUser =  window.sessionStorage.getItem("loginUser");
            if(loginUser!=null){
                this.loginUser = JSON.parse(loginUser)
            }
            //2. 根据bid向后端发送请求，获取图书详情
            axios.get("/products/getProductById",{
                params:{
                    bid:bid
                }
            }).then(function (res) {
                //将获取到的图书详情给vm的book属性赋值
                vm.book = res.data.data;

            })
        },
        methods:{
            //登录注册
            dz:function(f){
                if(f==0){
                    document.getElementById("loginDiv2").style.display = "block";
                }
                else{
                    this.loginAndRegist="regist";
                    document.getElementById("loginDiv2").style.display = "block";
                }
            },
            //点击注册
            doRegist:function () {
                //目标：将用户输入的数据提交到后台，判断校验并添加
                //1. 判断用户输入的数据是否合法
                var regex = /^1[3|5|7|8]\d{9}$/;     //编写手机号正则
                if(!regex.test(this.inputUser.username) || this.inputUser.password==""){//使用正则的test方法返回值为true或者false，判断是否满足正则
                    alert("注册信息不完善");
                }else{
                    //将用户数据提交到后台
                    axios.post("/users/regist",this.inputUser)
                        .then(function (res) {
                            //根据返回的状态码进行判断
                            if(res.data.code==0){
                                alert(res.data.msg);
                                //隐藏注册弹框
                                document.getElementById("loginDiv2").style.display = "none";
                            }else{
                                alert(res.data.msg);
                            }
                        })
                }
            },



            //点击登录
            doLogin:function () {
                axios.post("/users/login",this.inputUser)
                    .then(function (res) {
                        var item = window.localStorage.getItem("location");

                        if(res.data.code==0){
                            //登录成功
                            //使用会话级别存储数据的对象  sessionStorage
                            // sessionStorage也不可以直接存储json对象
                            window.sessionStorage.setItem("loginUser",JSON.stringify(res.data.data))
                            //将登录成功返回的用户对象赋值给vm.loginUser
                            vm.loginUser = res.data.data;
                            window.location.href = item;
                        }else{
                            alert(res.data.msg);
                        }
                    })
            },

            //点击X号关闭登录弹框
            closeButton:function () {
                document.getElementById("loginDiv2").style.display = "none";
            },
            //立即购买
            buy:function () {
                //判断当前用户是否登录
                axios.post("/products/addShopping",{
                    bid:this.book.productId,
                    num:this.num//购买数量
                })
                    .then(function (res) {
                        if(res.data.code==0){
                            // alert(res.data.msg);
                            window.location.href = "/pages/shopping_cart.html";
                        }else{
                            //未登录
                            alert(res.data.msg);
                            document.getElementById("loginDiv2").style.display = "block";
                        }
                    })
            },
            //加入购物车:
            addShopping:function () {
                //判断当前用户是否登录
                axios.post("/products/addShopping",{
                    bid:this.book.productId,
                    num:this.num//购买数量
                })
                    .then(function (res) {
                        if(res.data.code==0){
                            alert(res.data.msg);
                        }else{
                            //未登录
                            alert(res.data.msg);
                            document.getElementById("loginDiv2").style.display = "block";
                        }
                    })
            },
            //退出
            doExit:function () {
                axios.post("/users/exit")
                    .then(function (res) {
                        if(res.data.code==0){
                            alert(res.data.msg);
                            window.sessionStorage.removeItem("loginUser");
                            vm.loginUser = null;
                        }
                    })
            },
            //跳转到购物车页面
            gotoShoppingCart:function () {
                //先做登录拦截
                axios.post("/users/check")
                    .then(function (res) {
                        if(res.data.code==0){
                            window.location.href = "/pages/shopping_cart.html";
                        }else{
                            //未登录
                            alert(res.data.msg);
                            document.getElementById("loginDiv2").style.display = "block";
                        }
                    })
            }
        }
    })


</script>
</html>